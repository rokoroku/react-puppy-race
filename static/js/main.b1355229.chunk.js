(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(45)},25:function(e,t,a){},27:function(e,t,a){e.exports=a.p+"static/media/dog_standing.fb1c30b6.gif"},28:function(e,t,a){e.exports=a.p+"static/media/dog_running.ba5cc2b0.gif"},29:function(e,t,a){e.exports=a.p+"static/media/dog_loss.23cf503e.gif"},30:function(e,t,a){e.exports=a.p+"static/media/cat_standing.d0da33b9.gif"},31:function(e,t,a){e.exports=a.p+"static/media/cat_running.07a918bd.gif"},32:function(e,t,a){e.exports=a.p+"static/media/cat_loss.d1bfbdf7.gif"},33:function(e,t,a){},37:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){e.exports=a.p+"static/media/react-logo.5d5d9eef.svg"},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),c=a.n(i),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var l,u,m=a(13),f=a(2),d=a(3),p=a(5),v=a(4),b=a(6),g=a(47),h=a(48),E=a(7),N={READY:0,START:1,PAUSE:2,END:3},S="dog",y="cat",O={STANDING:0,RUNNING:1,LOSS:2},A={NORMAL:300,FAST:150},k=(a(25),{dog:(l={},Object(E.a)(l,O.STANDING,a(27)),Object(E.a)(l,O.RUNNING,a(28)),Object(E.a)(l,O.LOSS,a(29)),l),cat:(u={},Object(E.a)(u,O.STANDING,a(30)),Object(E.a)(u,O.RUNNING,a(31)),Object(E.a)(u,O.LOSS,a(32)),u)}),j=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).imgRef=r.a.createRef(),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.status,n=e.style,i=k[t][a];return r.a.createElement("img",{src:i,alt:t,className:"animal ".concat(t),style:n,ref:this.imgRef})}}]),t}(r.a.Component);j.defaultProps={type:S,color:"#000000",progress:0,status:O.STANDING};a(33);var T=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).animalRef=r.a.createRef(),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"getRankStyle",value:function(){var e=this.animalRef.current&&this.animalRef.current.imgRef&&this.animalRef.current.imgRef.current;return e?{left:e.offsetLeft+e.clientWidth-5}:{right:10}}},{key:"formatRank",value:function(e){return e=e+=1===e?"st \ud83d\udc51":2===e?"nd":"rd"}},{key:"render",value:function(){var e=this.props.animal,t=e.rank,a=e.name,n=e.finishedAt,i=e.progress;return r.a.createElement("div",{className:"lane ".concat(n?"finished":"")},r.a.createElement(j,Object.assign({},e,{style:{marginLeft:"".concat(i,"%")},ref:this.animalRef})),a&&r.a.createElement("span",{className:"meta name",children:a}),t&&r.a.createElement("span",{className:"meta rank",style:this.getRankStyle(),children:this.formatRank(t)}))}}]),t}(r.a.Component),R=r.a.createContext(),w=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"getTransitionStyle",value:function(e){var t=e.tickInterval/1e3;return r.a.createElement("style",null,".racetrack * { transition: all linear ".concat(t,"s; }"))}},{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,function(t){var a=t.state;return r.a.createElement("div",{className:"racetrack"},e.getTransitionStyle(a),a.animals.map(function(e,t){return r.a.createElement(T,{key:t,index:t,animal:e})}))})}}]),t}(r.a.Component),I=a(16),D=a(9),C=a(17),G=a(46),x=(a(37),{animals:[{name:"Puppy",type:S,status:O.STANDING,progress:0},{name:"Kitty",type:y,status:O.STANDING,progress:0}]}),L=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={initialValues:a.restoreSettings()},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"restoreSettings",value:function(){try{var e=localStorage.getItem("settings");if(e)return JSON.parse(e)}catch(t){console.error(t)}return x}},{key:"saveSettings",value:function(e){try{localStorage.setItem("settings",JSON.stringify(e))}catch(t){console.error(t)}}},{key:"render",value:function(){var e=this;return r.a.createElement(R.Consumer,null,function(t){var a=t.state,n=t.actions;return r.a.createElement("div",{className:"settings"},r.a.createElement(D.b,{onSubmit:G.a,mutators:I.a,initialValues:e.state.initialValues,render:function(t){var i=t.handleSubmit,c=t.mutators,s=t.values,o=a.status!==N.READY;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.c,{subscription:{values:!0},onChange:function(t){var a=t.values;e.saveSettings(a),n.setState(a)}}),r.a.createElement("form",{key:"form",style:{display:"flex",flexDirection:"column",margin:"20px"},onSubmit:i},r.a.createElement(C.a,{name:"animals"},function(e){var t=e.fields;return t.map(function(e,a){return r.a.createElement("div",{className:"ui input field left action ".concat(o?"disabled":""),key:a},r.a.createElement(D.a,{name:"".concat(e,".type"),component:"select",disabled:o,className:"ui compact selection dropdown",style:{padding:"6px"}},r.a.createElement("option",{value:S,children:"\ud83d\udc36"}),r.a.createElement("option",{value:y,children:"\ud83d\udc31"})),r.a.createElement(D.a,{name:"".concat(e,".name"),component:"input",placeholder:"name",disabled:o}),r.a.createElement("button",{onClick:function(){return t.remove(a)},className:"ui button icon",disabled:o,children:r.a.createElement("i",{className:"ui icon remove"})}))})}),r.a.createElement("div",{className:"ui field"},r.a.createElement("button",{className:"ui button icon fluid",onClick:function(){return c.push("animals",{type:[S,y][Object(g.a)(1)],name:s.animals.length+1})},disabled:o,children:r.a.createElement("i",{className:"ui icon add"})}))))}}))})}}]),t}(r.a.Component),F=(a(40),function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(R.Consumer,null,function(e){var t=e.state,a=e.actions,n=t.status===N.START,i=t.tickInterval===A.FAST;return r.a.createElement("div",{className:"ui fluid controls"},r.a.createElement("button",{className:"ui blue button",onClick:function(){return n?a.pauseGame():a.startGame()},disabled:t.status===N.END},r.a.createElement("i",{className:"ui icon ".concat(n?"pause":"play")}),n?"PAUSE":"START"),r.a.createElement("button",{className:"ui basic toggle button icon ".concat(i?"active":""),onClick:function(){return a.setSpeed(i?A.NORMAL:A.FAST)},disabled:t.status!==N.START},r.a.createElement("i",{className:"ui icon fast forward"})),r.a.createElement("button",{className:"ui basic button",onClick:function(){return a.resetGame()},disabled:t.status===N.START||t.status===N.READY},r.a.createElement("i",{className:"ui icon refresh"}),"RESET"))})}}]),t}(r.a.Component)),P=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={animals:[],status:N.READY,tickInterval:A.NORMAL},a.intervalTimer=null,a.actions={setState:function(e,t){return a.setState(e,t)},setSpeed:function(e){e!==a.state.tickInterval&&(clearInterval(a.intervalTimer),a.setState({tickInterval:e},function(){a.intervalTimer=setInterval(a.onTick,e)}))},startGame:function(){return a.state.status!==N.START&&a.setState({status:N.START},function(){a.intervalTimer=setInterval(a.onTick,a.state.tickInterval)})},pauseGame:function(){clearInterval(a.intervalTimer),a.state.status!==N.PAUSE&&a.setState({status:N.PAUSE})},resetGame:function(){clearInterval(a.intervalTimer),a.setState({status:N.READY,animals:a.state.animals.map(function(e){return Object(m.a)({},e,{status:O.STANDING,progress:0,recoverAt:null,finishedAt:null,rank:null})})})}},a.onTick=function(){var e=a.state.tickInterval===A.FAST;if(a.state.status===N.START){var t=a.state.animals.map(function(t,a){(t=Object(m.a)({},t,{progress:t.progress||0})).progress<100&&("run"===(t.recoverAt&&Number(t.recoverAt)>Date.now()||Object(g.a)(0,e?300:200)===a?"loss":"run")?(t.status=O.RUNNING,t.progress=Object(h.a)(t.progress+Object(g.a)(1,e?4:3,!0),100),t.recoverAt=null):t.status!==O.LOSS&&(t.status=O.LOSS,t.recoverAt=new Date(Date.now()+(e?1e3:1500)+Object(g.a)(1e3))));return 100!==t.progress||t.finishedAt||(t.status=O.STANDING,t.finishedAt=new Date),t}),n=[].concat(t).sort(function(e,t){return t.progress-e.progress||e.finishedAt-t.finishedAt||0});t.forEach(function(e){e.rank=n.findIndex(function(t){return t===e})+1});var r=t.every(function(e){return e.finishedAt})?N.END:a.state.status;a.setState({animals:t,status:r})}else clearInterval(a.intervalTimer)},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=this.actions;return r.a.createElement(R.Provider,{value:{state:e,actions:t}},r.a.createElement("div",{className:"PuppyRace"},r.a.createElement(w,null),r.a.createElement(L,null),r.a.createElement(F,null)))}}]),t}(r.a.Component);a(42);c.a.render(r.a.createElement("div",{class:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:a(44),className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"React Puppy Race")),r.a.createElement(P,null),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("p",null,"Dog and cat image are from"," ",r.a.createElement("a",{href:"https://dribbble.com/shots/2157574-BFF-s"},"BFF's")," by"," ",r.a.createElement("a",{href:"https://dribbble.com/madebyradio"},"R A D I O")))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");s?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):o(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):o(e)})}}()}},[[20,2,1]]]);
//# sourceMappingURL=main.b1355229.chunk.js.map